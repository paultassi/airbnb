<div class = "text-center">

  <%= image_tag @flat.picture.url(:banner) %>

  <div>
    <h1><%= @flat.title %></h1>
  </div>

  <p><%= @flat.zip_code %> - <%= @flat.city %></p>


  <hr>


  <p>capacity: <%= @flat.capacity %>, price: <%= @flat.price %>$/night   </p>


  <%= link_to "Edit your announce", edit_flat_path, class: "btn btn-primary" %>


    <%= render 'bookings/form' %>
<div id="map" style="width: 100%; height: 600px;"></div>
<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).on('ready', function() {
      handler = Gmaps.build('Google');
      handler.buildMap({ provider: {scrollwheel: false, navigationControl: false, mapTypeControl: false, scaleControl: false, draggable: false, streetViewControl: false, scrollwheel: false, zoomControl: false, disableDoubleClickZoom: false, overviewMapControl: false}, internal: { id: 'map' } }, function(){
        markers = handler.addMarkers(<%= raw @markers.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
        handler.getMap().setZoom(15);
      });
    })
  <% end %>
<% end %>

</div>
